<html><head><title>Permanent Link to Tabs, Sessão Web e Escalabilidade</title><meta charset="utf-8"></head><body><h2>Permanent Link to Tabs, Sessão Web e Escalabilidade</h2><p>Ultimamente tenho utilizado o <a href="http://web.archive.org/web/20090211221333/http://www.atlassian.com/software/jira/">Jira </a>como <em>Issue Tracker</em>. Apesar de gostar bastante do produto (mesmo sentindo falta de funcionalidades simples que o <a href="http://web.archive.org/web/20090211221333/http://www.bugzilla.org/">Bugzilla </a>tem) ele tem algo que me deixa profundamente irritado: a maneira com que guarda informações em escopo de sessão.</p><p></p><p>O problema é que o Jira guarda informações sobre o que estou visualizando em sessão. Quando abro várias tabs existe uma grande possibilidade de editar a issue errada, sempre tenho que dar um refresh na página antes de alterar algo. </p><p>Outro ponto importante é nunca, nunca mesmo, colocar informações que você vai pegar numa página em Sessão. Sessão é apenas para dados que <strong>precisam</strong> ser armazenados por mais de uma página, se você quer mandar dados de um servlet ou Action para um arquivo JSP utilize escopo de request e faça um forward.</p><p>Além de profundamente irritante, essa arquitetura não é escalável. Quando você atinge milhares de usuários famintos por conteúdo não dá para manter estado, simples assim. Arquiteturas escaláveis geralmente guardam apenas o mínimo necessário, e isso é bem pouco mesmo, e deixam o resto para os browser gerenciarem com cookies ou reescrita de URL.</p><p>Cluster de sessão web é um problema. No natal de alguns anos atrás fui acionado para resolver um problema em código legado do meu então cliente. Sem muitos motivos aparentes as 7 máquinas do JBoss cluster simplesmente não respondiam, ficavam apenas trocando informações em rede. Olhando o código eu percebi que alguém achou uma boa idéia serializar um arquivo PDF para mostrar ao usuário e… guardá-lo em sessão. A sessão era replicada e logo tínhamos 7 máquinas distribuindo entre si dezenas de arquivos PDF de 6MB cada.</p><p>Vale uma olhada.</p></body></html>