<html><head><title>Permanent Link to Problemas no WordPress…meio que corrigidos</title><meta charset="utf-8"></head><body><h2>Permanent Link to Problemas no WordPress…meio que corrigidos</h2><p>No ConexãoJava eu fiz um apelo por alguém que soubesse PHP e, especificamente, WordPress para me ajudar. Nenhuma boa alma :’(</p><p>Partindo dia 21 para Melbourne eu estou sem computador, quase sem celular, sem telefone fixo e, por consequência, sem Internet. Aproveitei uma tarde na casa da minha sogra entre um forumlário preenchido e um apartamento para alugar procurado, baixei o putty no computador do meu cunhado e tentei resolver o problema.</p><p>O Google não me trouxe nada de útil <a href="http://web.archive.org/web/20090212110626/http://www.google.com.br/search?q=upgrade.php+Unknown+column+%27user_nickname%27+in+%27field+list%27&amp;hl=pt-BR&amp;client=firefox-a&amp;rls=org.mozilla:pt-BR:official&amp;start=120&amp;sa=N">além de milhares de sites com o mesmo problema</a>. Quando eu tentava atualizar o WordPress recebia a mensagem:</p><p> 1. WordPress<br> 2.<br> 3. WordPress database error: [Unknown column ‘user_nickname’ in ‘field list’]<br> 4. SELECT ID, user_nickname, user_nicename FROM wp_users </p><p>Tentei remover todos os plugins. Nada. Remover temas. Nada. No final acabei tentando entender o upgrade.php e percebi que o problema certamente estava em uma variável que guarda a versão do banco de dados, a $wp_db_version. Ela deveria ser menor ou igual à 5183 e tinha valor 1! Não sei exatamente o que ocorreu mas certamente isso não era um estado válido.</p><p>Solução? Entrei no MySQL e rodei:</p><p><strong><br> Eu não tenho a menor idéia das consequências deste hack</strong> mas por enquanto tudo funciona. Já fiz backup da minha base de dados, por via das dúvidas…</p><p>Tive também que deletar uns 3000 spams que foram postados como comentários neste tempo. O Plugin anti-spam parou de funcionar e eu quase enlouqueci!</p></body></html>